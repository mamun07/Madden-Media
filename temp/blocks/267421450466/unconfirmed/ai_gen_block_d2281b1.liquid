{% doc %}
  @prompt
    Create a custom CSS glow effect for product outlines that adds an attractive luminous border around product images and cards. The glow should be subtle but noticeable, enhancing the visual appeal without being overwhelming., no i meant apply this to all exisitntg products

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-product-glow-enhancer-{{ ai_gen_id }} {
    --glow-color: {{ block.settings.glow_color }};
    --glow-opacity: {{ block.settings.glow_opacity | divided_by: 100.0 }};
    --glow-blur: {{ block.settings.glow_blur }}px;
    --glow-spread: {{ block.settings.glow_spread }}px;
    --hover-glow-opacity: {{ block.settings.hover_glow_opacity | divided_by: 100.0 }};
    --hover-glow-blur: {{ block.settings.hover_glow_blur }}px;
    --hover-glow-spread: {{ block.settings.hover_glow_spread }}px;
  }

  {% comment %} Target existing product cards {% endcomment %}
  .ai-product-glow-enhancer-{{ ai_gen_id }} .card,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .product-card,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .card-wrapper,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .product-item,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .grid__item,
  .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"],
  .ai-product-glow-enhancer-{{ ai_gen_id }} .card__inner {
    position: relative;
    transition: all 0.3s ease;
  }

  .ai-product-glow-enhancer-{{ ai_gen_id }} .card::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .product-card::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .card-wrapper::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .product-item::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .grid__item::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"]::before,
  .ai-product-glow-enhancer-{{ ai_gen_id }} .card__inner::before {
    content: '';
    position: absolute;
    top: calc(-1 * var(--glow-spread));
    left: calc(-1 * var(--glow-spread));
    right: calc(-1 * var(--glow-spread));
    bottom: calc(-1 * var(--glow-spread));
    background: var(--glow-color);
    border-radius: inherit;
    opacity: var(--glow-opacity);
    z-index: -1;
    filter: blur(var(--glow-blur));
    pointer-events: none;transition: all 0.3s ease;
  }

  {% if block.settings.enable_hover_effect %}
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-card:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card-wrapper:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-item:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .grid__item:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"]:hover::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card__inner:hover::before {
      opacity: var(--hover-glow-opacity);
      filter: blur(var(--hover-glow-blur));top: calc(-1 * var(--hover-glow-spread));
      left: calc(-1 * var(--hover-glow-spread));
      right: calc(-1 * var(--hover-glow-spread));
      bottom: calc(-1 * var(--hover-glow-spread));
    }
  {% endif %}

  {% comment %} Target product images specifically {% endcomment %}
  {% if block.settings.apply_to_images %}
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card__media img,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-image img,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .media img,
    .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"] img {
      position: relative;
      transition: all 0.3s ease;
    }

    .ai-product-glow-enhancer-{{ ai_gen_id }} .card__media img::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-image img::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .media img::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"] img::before {
      content: '';
      position: absolute;
      top: calc(-1 * var(--glow-spread));
      left: calc(-1 * var(--glow-spread));
      right: calc(-1 * var(--glow-spread));
      bottom: calc(-1 * var(--glow-spread));
      background: var(--glow-color);
      border-radius: inherit;
      opacity: var(--glow-opacity);
      z-index: -1;
      filter: blur(var(--glow-blur));
      pointer-events: none;
      transition: all 0.3s ease;
    }

    {% if block.settings.enable_hover_effect %}
      .ai-product-glow-enhancer-{{ ai_gen_id }} .card__media img:hover::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} .product-image img:hover::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} .media img:hover::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"] img:hover::before {
        opacity: var(--hover-glow-opacity);
        filter: blur(var(--hover-glow-blur));
        top: calc(-1 * var(--hover-glow-spread));
        left: calc(-1 * var(--hover-glow-spread));
        right: calc(-1 * var(--hover-glow-spread));
        bottom: calc(-1 * var(--hover-glow-spread));
      }
    {% endif %}
  {% endif %}

  {% comment %} Pulse animation {% endcomment %}
  {% if block.settings.enable_pulse_effect %}
    @keyframes ai-glow-pulse-{{ ai_gen_id }} {
      0%, 100% {
        opacity: var(--glow-opacity);}
      50% {
        opacity: {{ block.settings.pulse_max_opacity | divided_by: 100.0 }};
      }
    }

    .ai-product-glow-enhancer-{{ ai_gen_id }} .card::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-card::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card-wrapper::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .product-item::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .grid__item::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"]::before,
    .ai-product-glow-enhancer-{{ ai_gen_id }} .card__inner::before {
      animation: ai-glow-pulse-{{ ai_gen_id }} {{ block.settings.pulse_duration }}s ease-in-out infinite;
    }

    {% if block.settings.apply_to_images %}
      .ai-product-glow-enhancer-{{ ai_gen_id }} .card__media img::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} .product-image img::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} .media img::before,
      .ai-product-glow-enhancer-{{ ai_gen_id }} [class*="product"] img::before {
        animation: ai-glow-pulse-{{ ai_gen_id }} {{ block.settings.pulse_duration }}s ease-in-out infinite;
      }
    {% endif %}
  {% endif %}

  {% comment %} Custom selector targeting {% endcomment %}
  {% if block.settings.custom_selector != blank %}
    .ai-product-glow-enhancer-{{ ai_gen_id }} {{ block.settings.custom_selector }} {
      position: relative;
      transition: all 0.3s ease;
    }

    .ai-product-glow-enhancer-{{ ai_gen_id }} {{ block.settings.custom_selector }}::before {
      content: '';
      position: absolute;
      top: calc(-1 * var(--glow-spread));
      left: calc(-1 * var(--glow-spread));
      right: calc(-1 * var(--glow-spread));
      bottom: calc(-1 * var(--glow-spread));
      background: var(--glow-color);
      border-radius: inherit;
      opacity: var(--glow-opacity);
      z-index: -1;
      filter: blur(var(--glow-blur));
      pointer-events: none;
      transition: all 0.3s ease;
    }

    {% if block.settings.enable_hover_effect %}
      .ai-product-glow-enhancer-{{ ai_gen_id }} {{ block.settings.custom_selector }}:hover::before {
        opacity: var(--hover-glow-opacity);
        filter: blur(var(--hover-glow-blur));
        top: calc(-1 * var(--hover-glow-spread));
        left: calc(-1 * var(--hover-glow-spread));
        right: calc(-1 * var(--hover-glow-spread));
        bottom: calc(-1 * var(--hover-glow-spread));
      }
    {% endif %}

    {% if block.settings.enable_pulse_effect %}
      .ai-product-glow-enhancer-{{ ai_gen_id }} {{ block.settings.custom_selector }}::before {
        animation: ai-glow-pulse-{{ ai_gen_id }} {{ block.settings.pulse_duration }}s ease-in-out infinite;
      }
    {% endif %}
  {% endif %}

  {% comment %} Ensure glow doesn't interfere with layout {% endcomment %}
  .ai-product-glow-enhancer-{{ ai_gen_id }} * {
    z-index: auto;
  }

  .ai-product-glow-enhancer-{{ ai_gen_id }} *::before {
    z-index: -1 !important;
  }
{% endstyle %}<div class="ai-product-glow-enhancer-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.show_instructions %}
    <div style="
      padding: 20px;
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      color: #495057;
      font-size: 14px;
    ">
      <strong>Glow Effect Active</strong><br>
      This block applies glow effects to all product cards and images on the page.
      {% if block.settings.custom_selector != blank %}
        <br>Custom selector: <code>{{ block.settings.custom_selector }}</code>
      {% endif %}
    </div>
  {% endif %}</div>

<script>
(function() {
  class ProductGlowEnhancer{{ ai_gen_id }} extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      this.applyGlowToExistingElements();
      this.observeNewElements();
    }

    applyGlowToExistingElements() {
      const selectors = [
        '.card',
        '.product-card', 
        '.card-wrapper',
        '.product-item',
        '.grid__item',
        '[class*="product"]',
        '.card__inner'
      ];

      if ('{{ block.settings.custom_selector }}') {
        selectors.push('{{ block.settings.custom_selector }}');
      }

      selectors.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(element => {
          if (!element.closest('.ai-product-glow-enhancer-{{ ai_gen_id }}')) {
            element.style.position = element.style.position || 'relative';
          }
        });
      });
    }

    observeNewElements() {
      if (typeof MutationObserver !== 'undefined') {
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.type === 'childList') {
              mutation.addedNodes.forEach((node) => {
                if (node.nodeType === 1) {
                  this.applyGlowToExistingElements();
                }
              });
            }
          });
        });

        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }

  customElements.define('product-glow-enhancer-{{ ai_gen_id }}', ProductGlowEnhancer{{ ai_gen_id }});
})();
</script>

{% schema %}
{
  "name": "Product glow enhancer",
  "settings": [
    {
      "type": "header",
      "content": "Glow effect settings"
    },
    {
      "type": "color",
      "id": "glow_color",
      "label": "Glow color",
      "default": "#4f46e5"
    },
    {
      "type": "range",
      "id": "glow_opacity",
      "min": 5,
      "max": 60,
      "step": 5,
      "unit": "%",
      "label": "Glow opacity",
      "default": 20
    },
    {
      "type": "range",
      "id": "glow_blur",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Glow blur",
      "default": 10
    },
    {
      "type": "range",
      "id": "glow_spread",
      "min": 2,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Glow spread",
      "default": 6
    },
    {
      "type": "header",
      "content": "Hover effect"
    },
    {
      "type": "checkbox",
      "id": "enable_hover_effect",
      "label": "Enable hover enhancement",
      "default": true
    },
    {
      "type": "range",
      "id": "hover_glow_opacity",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Hover glow opacity",
      "default": 40
    },
    {
      "type": "range",
      "id": "hover_glow_blur",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Hover glow blur",
      "default": 15
    },
    {
      "type": "range",
      "id": "hover_glow_spread",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Hover glow spread",
      "default": 10
    },
    {
      "type": "header",
      "content": "Pulse animation"
    },
    {
      "type": "checkbox",
      "id": "enable_pulse_effect",
      "label": "Enable pulse animation"
    },
    {
      "type": "range",
      "id": "pulse_max_opacity",
      "min": 30,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Pulse max opacity",
      "default": 50
    },
    {
      "type": "range",
      "id": "pulse_duration",
      "min": 1,
      "max": 5,
      "step": 1,
      "unit": "s",
      "label": "Pulse duration",
      "default": 3
    },
    {
      "type": "header",
      "content": "Target options"
    },
    {
      "type": "checkbox",
      "id": "apply_to_images",
      "label": "Apply glow to product images",
      "default": true
    },
    {
      "type": "text",
      "id": "custom_selector",
      "label": "Custom CSS selector",
      "info": "Add a custom CSS selector to target specific elements (e.g., .my-product-class)"
    },
    {
      "type": "checkbox",
      "id": "show_instructions",
      "label": "Show instruction banner",
      "default": true,
      "info": "Display a banner explaining that the glow effect is active"
    }
  ],
  "presets": [
    {
      "name": "Product glow enhancer"
    }
  ]
}
{% endschema %}